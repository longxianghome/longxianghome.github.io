<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>记录 总结 思考 成长</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="记录 总结 思考 成长">
<meta property="og:url" content="http://longxianghome.com/page/16/index.html">
<meta property="og:site_name" content="记录 总结 思考 成长">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="记录 总结 思考 成长">
  
    <link rel="alternate" href="/atom.xml" title="记录 总结 思考 成长" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">记录 总结 思考 成长</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Java Web 开发</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://longxianghome.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-20170524-JDK 1.7 java.io 源码学习之 AutoCloseable 接口和 try-with-resource 语法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/24/20170524-JDK 1.7 java.io 源码学习之 AutoCloseable 接口和 try-with-resource 语法/" class="article-date">
  <time datetime="2017-05-24T05:57:24.000Z" itemprop="datePublished">2017-05-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JDK-源码-1-7/">JDK 源码 1.7</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/24/20170524-JDK 1.7 java.io 源码学习之 AutoCloseable 接口和 try-with-resource 语法/">JDK 1.7 java.io 源码学习之 AutoCloseable 和 try-with-resources 语法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>为了更好的梳理java.io内类之间的关系，梳理了一下包内类之间的关系，现从接口开始阅读。从AutoCloaseable接口开始，这个接口并不在java.io包内，但是它是Closeable接口的父接口，故直接归这边说明了。</p>
<p>AutoCloseable接口非常简单，只定义了一个close方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface AutoCloseable &#123;</span><br><span class="line">    void close() Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该接口是JDK 1.7 才新增的一个接口，看方法文档注释该方法在try-with-resources语句中会被自动调用，用于自动释放资源。</p>
<p>try-with-resources语句是JDK 1.7中一个新的异常处理机制，更方便简洁的关闭在try-catch语句块中使用的资源，这里不得不提及传统的资源释放方式try-catch-finally：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">byte[] b = new byte[1024];</span><br><span class="line"></span><br><span class="line">FileInputStream fis = null;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">	fis = new FileInputStream(&quot;my.txt&quot;);</span><br><span class="line">	int data = fis.read();</span><br><span class="line">	while(data != -1) &#123;</span><br><span class="line">		data = fis.read(b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">	if (fis != null) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			fis.close();</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(new String(b));</span><br></pre></td></tr></table></figure>
<p>传统的资源释放方式是利用finally语句块的特性，不管try语句块里是否抛出异常，finally语句块均会被执行，该方式存在一个较隐蔽的问题，先看下面的改造示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">byte[] b = new byte[1024];</span><br><span class="line"></span><br><span class="line">FileInputStream fis = null;</span><br><span class="line"></span><br><span class="line">try &#123;</span><br><span class="line">	fis = new FileInputStream(&quot;my.txt&quot;);</span><br><span class="line">	int data = fis.read();</span><br><span class="line">	while (data != -1) &#123;</span><br><span class="line">		data = fis.read(b);</span><br><span class="line">	&#125;</span><br><span class="line">	throw new RuntimeException();</span><br><span class="line">&#125; catch (FileNotFoundException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">	throw new RuntimeException();</span><br><span class="line">&#125; finally &#123;</span><br><span class="line">	if (fis != null) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			fis.close();</span><br><span class="line">			throw new IOException();</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			throw new IOException();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(new String(b));</span><br></pre></td></tr></table></figure>
<p>本意是想捕获RuntimeException的，但是因为finally语句块的特性，抛出的IOException“抑制”了RuntimeException，外界捕获到的是IOException，不便于准确的判断问题所在。因为是根据调用栈向外抛出异常。</p>
<p>如果采用try-with-resources结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">byte[] b = new byte[1024];</span><br><span class="line"></span><br><span class="line">try(FileInputStream fis = new FileInputStream(&quot;my.txt&quot;)) &#123;</span><br><span class="line">	int data = fis.read();</span><br><span class="line">	while (data != -1) &#123;</span><br><span class="line">		data = fis.read(b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(new String(b));</span><br></pre></td></tr></table></figure>
<p>代码非常简洁，而且FileInputStream资源会被自动关闭，且若抛出异常也是内部的确定异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">byte[] b = new byte[1024];</span><br><span class="line"></span><br><span class="line">try (FileInputStream fis = new FileInputStream(&quot;my.txt&quot;)) &#123;</span><br><span class="line">	int data = fis.read();</span><br><span class="line">	while (data != -1) &#123;</span><br><span class="line">		data = fis.read(b);</span><br><span class="line">	&#125;</span><br><span class="line">	throw new RuntimeException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当try-with-resources结构中抛出一个异常，同时fis被释放时也抛出一个异常，最终向外抛出是try-with-resources内部的异常，反而FileInputStream资源释放时的异常被抑制，刚好和try-catch-finally相反</p>
<p>若在try-with-resources结构中有多个资源需要被释放，只要实现了AutoCloseable接口，均能被自动关闭：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">byte[] b = new byte[1024];</span><br><span class="line"></span><br><span class="line">try(FileInputStream fis = new FileInputStream(&quot;my.txt&quot;); BufferedInputStream bis = new BufferedInputStream(fis);) &#123;</span><br><span class="line">	int data = bis.read();</span><br><span class="line">	while (data != -1) &#123;</span><br><span class="line">		data = fis.read(b);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(new String(b));</span><br></pre></td></tr></table></figure>
<p>关闭的顺序是创建的顺序的逆序。</p>
<p>Closeable接口继承了AutoCloseable接口，故原有实现Closeable接口的类，均能在try-with-resources结构中使用。</p>
<p>也可以将自定义的类实现AutoCloseable接口，然后在try-with-resources结构中使用。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://longxianghome.com/2017/05/24/20170524-JDK 1.7 java.io 源码学习之 AutoCloseable 接口和 try-with-resource 语法/" data-id="cjlc35eui009y7d6b9i6obm8p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-20170523-JDK 1.7 java.io 源码学习之 ByteArrayInputStream 和 ByteArrayOutputStream" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/20170523-JDK 1.7 java.io 源码学习之 ByteArrayInputStream 和 ByteArrayOutputStream/" class="article-date">
  <time datetime="2017-05-23T05:57:24.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JDK-源码-1-7/">JDK 源码 1.7</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/20170523-JDK 1.7 java.io 源码学习之 ByteArrayInputStream 和 ByteArrayOutputStream/">JDK 1.7 java.io 源码学习之 ByteArrayInputStream 和 ByteArrayOutputStream</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ByteArrayInputStream 和 ByteArrayOutputStream 与 FileInputStream 和 FileOutputStream 非常类似，只是将数据源从文件改为了JVM 中的ByteArray 字节数组了。</p>
<p>ByteArrayInputStream 构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public ByteArrayInputStream(byte buf[]) &#123;</span><br><span class="line">    this.buf = buf;</span><br><span class="line">    this.pos = 0;</span><br><span class="line">    this.count = buf.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public ByteArrayInputStream(byte buf[], int offset, int length) &#123;</span><br><span class="line">    this.buf = buf;</span><br><span class="line">    this.pos = offset;</span><br><span class="line">    this.count = Math.min(offset + length, buf.length);</span><br><span class="line">    this.mark = offset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>构造函数中必须传递一个字节数组，表示流的数据来源所在。</p>
<p>核心的是read()方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public synchronized int read() &#123;</span><br><span class="line">    return (pos &lt; count) ? (buf[pos++] &amp; 0xff) : -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized int read(byte b[], int off, int len) &#123;</span><br><span class="line">    if(b == null) &#123;</span><br><span class="line">        throw new NullPointException();</span><br><span class="line">    &#125; else if(off &lt; 0 || len &lt; 0 || len &gt; b.length - off) &#123;</span><br><span class="line">        throw new IndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line">    // 保存的字节数组开始下标若大于字节数组长度则返回-1</span><br><span class="line">    if(pos &gt;= count) &#123;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    //可用的数组长度，只有这些下标允许被放入数据</span><br><span class="line">    int avail = count - pos;</span><br><span class="line">    //假设一次想读取10个字节数据，但可用于保存的只有8个字节长度，那么就读取8个字节数据</span><br><span class="line">    if(len &gt; avail) &#123;</span><br><span class="line">        len = avail;</span><br><span class="line">    &#125;</span><br><span class="line">    if(len &lt;= 0) &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    //数组拷贝</span><br><span class="line">    System.arraycopy(buf, pos, b, off, len);</span><br><span class="line">    //更新下标</span><br><span class="line">    pos += len;</span><br><span class="line">    return len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出是通过arrycopy 数组拷贝的方式，将数据读入到缓冲字节数组中的<br>值得注意的是这两个read方法都加了synchronized关键字，表示是线程安全的</p>
<p>而且 重写了InputStream类的markSupported()、mark(int readAheadLimit)、reset() 方法的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public boolean markSupported() &#123;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void mark(int readAheadLimit) &#123;</span><br><span class="line">    mark = pos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized void resest() &#123;</span><br><span class="line">    pos = mark;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ByteArrayInputStream里面很多方法都加了synchronized关键字，还有skip()、available() 等方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public synchronized long skip(long n) &#123;</span><br><span class="line">    long k = count - pos;</span><br><span class="line">    if (n &lt; k) &#123;</span><br><span class="line">         k = n &lt; 0 ? 0 : n;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    pos += k;</span><br><span class="line">    return k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized int available() &#123;</span><br><span class="line">    return count - pos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ByteArrayOutputStream 构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public ByteArrayOutputStream() &#123;</span><br><span class="line">    this(32);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public ByteArrayOutputStream(int size) &#123;</span><br><span class="line">    if(size &lt; 0) &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;Negative initial size: &quot; + size);</span><br><span class="line">    &#125;</span><br><span class="line">    buf = new byte[size];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就是实例化一个接收数据的字节数组，默认长度是32</p>
<p>核心的write方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public synchronized void write(int b) &#123;</span><br><span class="line">    ensureCapacity(count + 1);</span><br><span class="line">    buf[count] = (byte)b;</span><br><span class="line">    count += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized void write(byte b[], int off, int len) &#123;</span><br><span class="line">    if((off &lt; 0) || (off &gt; b.length) || (len &lt; 0) || ((off + len) - b.length &gt; 0)) &#123;</span><br><span class="line">        throw new IndexOutOfBoundsException();</span><br><span class="line">    &#125;</span><br><span class="line">    ensureCapacity(couont + len);</span><br><span class="line">    System.arraycopy(b, off, buf, count, len);</span><br><span class="line">    count += len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也是通过数组拷贝的方式，也是线程安全的方法，需要关注的是里面有个自动扩容的机制，即当保存数据的字节数组长度不够时，可以自动扩容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">private void ensureCapacity(int minCapacity) &#123;</span><br><span class="line">    if(minCapacity - buf.length &gt; 0) &#123;</span><br><span class="line">         grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private void grow(int minCapacity) &#123;</span><br><span class="line">    int oldCapacity = buf.length;</span><br><span class="line">    int newCapacity = old.Capacity &lt;&lt; 1;</span><br><span class="line">    if(newCapacity - minCapacity &lt; 0) &#123;</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    &#125;</span><br><span class="line">    if(newCapacity &lt; 0) &#123;</span><br><span class="line">        if(minCapacity &lt; 0) &#123;</span><br><span class="line">             throw new OutOfMemoryEerror();</span><br><span class="line">        &#125;</span><br><span class="line">        newCapacity = Integer.MAX_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">    buf = Arrays.copyOf(buf, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过一个例子演示一下自动扩容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String content = &quot;流.write 的常规&quot;;</span><br><span class="line">byte b[] = content.getBytes();</span><br><span class="line">int off = 0;</span><br><span class="line">int len = b.length;</span><br><span class="line">ByteArrayOutputStream baos = new ByteArrayOutputStream(9);</span><br><span class="line"></span><br><span class="line">baos.write(b, off, len);</span><br><span class="line"></span><br><span class="line">System.out.println(baos.toString());</span><br></pre></td></tr></table></figure>
<p>content 转换为字节数组时，长度是19，但是ByteArrayOutputStream只能保存9个字节的数据：<br>new ByteArrayOutputStream(9)执行后，BayteArrayOutputStream内部持有的两个对象byte buf[] = new byte[9]; int count = 0;</p>
<p>执行write方法时先调用ensureCapacity(count + len)方法，minCapacity = 0 + 19 = 19，minCapacity - buf.length &gt; 0，故需要执行grow(int minCapacity)方法<br>int oldCapacity = 9；<br>int newCapacity = oldCapacity &lt;&lt; 1；<br>左移1位，newCapacity = 18<br>newCapacity - miniCapacity &lt; 0，<br>newCapacity = minCapacity ，<br>newCapacity = 19<br>通过扩容，已经可以满足所需，扩容也是通过数组拷贝</p>
<p>grow方法中有两处感觉比较精妙：</p>
<ol>
<li>先通过左移1位的方式扩容</li>
<li>扩容以后新容量和所需容量进行一次比较，若还不够则直接使用所需容量当做新容量</li>
</ol>
<p>如果每次都按所需容量进行扩容操作，则每次write都需要扩容，比较耗时间，<br>而先通过左移一位的方式扩容，可以一定程度上减少扩容的次数</p>
<p>ByteArrayOutputStream 提供toString和toByteArray方法展现里面的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public synchronized byte toByteArray()[] &#123;</span><br><span class="line">    return Arrays.copyOf(buf, count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized String toString() &#123;</span><br><span class="line">    return new String(buf, 0, count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public synchronized String toString(String charsetName) throws UnsupportedEncodingException &#123;</span><br><span class="line">    return new String(buf, 0, count, charsetName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码还有一处比较不一样，扩容的时候数组拷贝时Arrays.copyOf()方法，write时使用的是Sytem.arraycopy()方法，不过看Arrays.copyOf() 源码发现也是调用的System.arraycopy() 方法，该方法是个native方法</p>
<p><strong>小结：</strong></p>
<ol>
<li><strong>ByteArrayInputStream 和 ByteArrayOutputStream 里的方法基本都被synchronized关键字修饰，是线程安全的</strong></li>
<li><strong>ByteArrayInputStream 和 ByteArrayOutputStream 均是通过数组拷贝的方式实现read和write</strong></li>
<li><strong>ByteArrayOutputStream write方法有个自动扩容机制，可以实现动态扩容</strong></li>
<li><strong>ByteArrayOutputStream 提供相应的方法用于获取内部的内容</strong></li>
<li><strong>ByteArrayInputStream 和 ByteArrayOutputStream 重写了 mark相关的三个方法</strong></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://longxianghome.com/2017/05/23/20170523-JDK 1.7 java.io 源码学习之 ByteArrayInputStream 和 ByteArrayOutputStream/" data-id="cjlc35eug009u7d6bhws0oggv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-IO-Framework/">Java IO Framework</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20170522-JDK 1.7 java.io 源码学习之 FileInputStream 和 FileOutputStream" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/22/20170522-JDK 1.7 java.io 源码学习之 FileInputStream 和 FileOutputStream/" class="article-date">
  <time datetime="2017-05-22T05:57:24.000Z" itemprop="datePublished">2017-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JDK-源码-1-7/">JDK 源码 1.7</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/22/20170522-JDK 1.7 java.io 源码学习之 FileInputStream 和 FileOutputStream/">JDK 1.7 java.io 源码学习之 FileInputStream 和 FileOutputStream</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>文件，应该是开发中较常见的数据源了，故操作文件的字节输入/输出流FileInputStream和FileOutputStream 是 Java IO 字节流中重要的实现类之一。</p>
<p>在说FileInputStream和FileOutputStream之前不得不提一下File类。<br>File也是java.io 包中的一个类，主要用于描述文件及文件目录路径，具体这里不展开，在FileInputStream和FileOutputStream中主要就是在构造FileInputStream和FileOutputStream时，告知其数据源。</p>
<p>FileInputStream有两个较常见的构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public FileInputStream(String name) throws FileNotFoundException &#123;</span><br><span class="line">    this(name != null ? new File(name) : null);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public FileInputStream(File file) throws FileNotFoundException &#123;</span><br><span class="line">    String name = (file != null ? file.getPath() : null);</span><br><span class="line">    SecurityManager security = System.getSecurityManager();</span><br><span class="line">    if(security != null) &#123;</span><br><span class="line">         security.checkRead(name);</span><br><span class="line">    &#125;</span><br><span class="line">    if(name == null) &#123;</span><br><span class="line">         throw new NullPointerException;</span><br><span class="line">    &#125;</span><br><span class="line">    if(file.isInvalid()) &#123;</span><br><span class="line">         throw new FileNotFoundException(&quot;Invalid file path&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    fd = new FileDescriptor();</span><br><span class="line">    fd.incrementAndGetUseCount();</span><br><span class="line">    this.path = name;</span><br><span class="line">    open(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上述两个构造函数大致可以看出，前面一些都是控制和属性赋值相关的语句，核心的就是最后一句open(String name)方法</p>
<p>而且也引出了另一个构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public FileInputStream(FileDescriptor fdObj) &#123;</span><br><span class="line">    SecurityManager security = System.getSecurityManager();</span><br><span class="line">    if(fdObj == null) &#123;</span><br><span class="line">        throw new NullPointException();</span><br><span class="line">    &#125;</span><br><span class="line">    if(security != null) &#123;</span><br><span class="line">        security.checkRead(fdObj);</span><br><span class="line">    &#125;</span><br><span class="line">    fd = fdObj;</span><br><span class="line">    path = null;</span><br><span class="line">    fd.incrementAndGetUseCount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是open(String name) 其实是一个native方法，由JVM自身实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private native void open(String name) throws FileNotFouondException;</span><br></pre></td></tr></table></figure>
<p>最重要的三个方法即InputStream三个read()方法的重写：</p>
<p><strong>public ind read() throws IOException</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public ind read() throws IOException &#123;</span><br><span class="line">   Object traceContext = IoTrace.fileReadBegin(path);</span><br><span class="line">   int b = 0;</span><br><span class="line">   try &#123;</span><br><span class="line">       b = read0();</span><br><span class="line">   &#125; finally &#123;</span><br><span class="line">       IoTrace.fileReadEnd(traceContext, b == -1 ? 0 : 1);</span><br><span class="line">   &#125;</span><br><span class="line">   return b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private native int read0() throws IOException;</span><br></pre></td></tr></table></figure></p>
<p>实际只是调用了native read0()方法</p>
<p><strong>public int read(byte b[]) throws IOException</strong><br><strong>public int read(byte b[], int off, int len) throws IOException</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public int read(byte b[]) throws IOException &#123;</span><br><span class="line">    Object traceContext = IoTrace.fileReadBegin(path);</span><br><span class="line">    int bytesRead = 0;</span><br><span class="line">    try &#123;</span><br><span class="line">        bytesRead = readBytes(b, 0, b.length);</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        IoTrace.fileReadEnd(traceContext, bytesRead == -1 ? 0 : bytesRead);</span><br><span class="line">    &#125;</span><br><span class="line">    return bytesRead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public int read(byte b[], int off, int len) throws IOException &#123;</span><br><span class="line">    Object traceContext = IoTrace.fileReadBegin(path);</span><br><span class="line">    int bytesRead = 0;</span><br><span class="line">    try &#123;</span><br><span class="line">        bytesRead = readBytes(b, off, len);</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        IoTrace.fileReadEnd(traceContext, bytesRead == -1 ? 0 : bytesRead);</span><br><span class="line">    &#125;</span><br><span class="line">    return bytesRead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private native int readBytes(byte b[], int off, int len) throws IOException;</span><br></pre></td></tr></table></figure></p>
<p>实际只是调用了native readBytes(byte b[], int off, int len)方法</p>
<p>其他好几个也都是native 方法，像skip()， available()，open(String name) 等等</p>
<p>值得一提的就是，增加了一个获取NIO对象FileChannel的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public FileChannel getChannel() &#123;</span><br><span class="line">    synchronized (this) &#123;</span><br><span class="line">        if(channel == null) &#123;</span><br><span class="line">             channel = FileChannelImpl.open(fd, path, true, false, this);</span><br><span class="line">             fd.incrementAndGetUseCount();</span><br><span class="line">        &#125;</span><br><span class="line">        return channel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体等后面看了NIO相关内容再补充吧！这个方法和单例模式还是非常相像的。</p>
<p>对应的FileOutputStream也是类似的结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public FileOutputStream(String name) throws FileNotFoundException &#123;</span><br><span class="line">    this(name != null ? new File(name) : null, false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public FileOutputStream(String name, boolean append) throws FileNotFoundException &#123;</span><br><span class="line">    this(name != null ? new File(name) : null, append);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public FileOutputStream(File file) throws FileNotFoundException &#123;</span><br><span class="line">    this(file, false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">publid FileOutputStream(File file, boolean append) throws FileNotFoundException &#123;</span><br><span class="line">    String name = (file != null ? file.getPath() : null);</span><br><span class="line">    SecurityManager security = System.getSecurityManager();</span><br><span class="line">    if(security != null) &#123;</span><br><span class="line">        security.checkWrite(name);</span><br><span class="line">    &#125;</span><br><span class="line">    if(name == null) &#123;</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    &#125;</span><br><span class="line">    if(file.isInvalid()) &#123;</span><br><span class="line">        throw new FileNotFoundException(&quot;Invalid file path&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    this.fd = new FileDescriptor();</span><br><span class="line">    this.append = append;</span><br><span class="line">    this.path = name;</span><br><span class="line">    fd.incrementAndGetUseCount();</span><br><span class="line">    open(name, append);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> public FileOutputStream(FileDescriptor fdObj) &#123;</span><br><span class="line">        SecurityManager security = System.getSecurityManager();</span><br><span class="line">        if (fdObj == null) &#123;</span><br><span class="line">            throw new NullPointerException();</span><br><span class="line">        &#125;</span><br><span class="line">        if (security != null) &#123;</span><br><span class="line">            security.checkWrite(fdObj);</span><br><span class="line">        &#125;</span><br><span class="line">        this.fd = fdObj;</span><br><span class="line">        this.path = null;</span><br><span class="line">        this.append = false;</span><br><span class="line"></span><br><span class="line">        fd.incrementAndGetUseCount();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>FileOutputStream的构造函数相比FileInputStream的多了一个boolean append的参数，所以构造函数多了一个重载的构造函数。<br>boolean append 参数表示是否从文件内容末尾进行追加，默认是不追加的，采用覆盖模式，即如果文件原本是有内容的，一旦创建了针对这个文件的FileOutputStream，该文件的内容就被覆盖了，因为一旦通过构造函数实例化了FileOutputStream对象，其已经调用了open方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private native void open(String name, boolean append) throws FileNotFoundException;</span><br></pre></td></tr></table></figure>
<p>较重要的三个方法也是对OutputStream重写的三个write方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public void write(int b) throws IOException &#123;</span><br><span class="line">    Object traceContext = IoTrace.fileWriteBegin(path);</span><br><span class="line">    int bytesWritten = 0;</span><br><span class="line">    try &#123;</span><br><span class="line">        write(b, append);</span><br><span class="line">        bytesWritten = 1;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        IoTrace.fileWriteEnd(traceContext, bytesWritten);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private native void write(int b, boolean append) throws IOException;</span><br><span class="line"></span><br><span class="line">private native void writeBytes(byte b[], int off, int len, boolean append) throws IOException;</span><br><span class="line"></span><br><span class="line">public void write(byte b[]) throws IOException &#123;</span><br><span class="line">    Object traceContext = IoTrace.fileWriteBegin(path);</span><br><span class="line">    int bytesWritten = 0;</span><br><span class="line">    try &#123;</span><br><span class="line">        writeBytes(b, 0, b.length, append);</span><br><span class="line">        bytesWritten = b.length;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        IoTrace.fileWriteEnd(traceContext, bytesWritten);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void write(byte b[], int off, int len) throws IOException &#123;</span><br><span class="line">    Object traceContext = IoTrace.fileWriteBegin(path);</span><br><span class="line">    int bytesWritten = 0;</span><br><span class="line">    try &#123;</span><br><span class="line">        writeBytes(b, off, len, append);</span><br><span class="line">        bytesWritten = len;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        IoTrace.fileWriteEnd(traceContext, bytesWritten);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相应的都是调用相关的native方法</p>
<p>也增加了一个获取NIO对象FileChannel的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public FileChannel getChannel() &#123;</span><br><span class="line">    synchronized (this) &#123;</span><br><span class="line">        if (channel == null) &#123;</span><br><span class="line">            channel = FileChannelImpl.open(fd, path, false, true, append, this);</span><br><span class="line">            fd.incrementAndGetUseCount();</span><br><span class="line">        &#125;</span><br><span class="line">        return channel;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其他的像close()方法最终也是调用的natvie close0() 方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void close() throws IOException &#123;</span><br><span class="line">    synchronized (closeLock) &#123;</span><br><span class="line">        if (closed) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        closed = true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (channel != null) &#123;</span><br><span class="line">        fd.decrementAndGetUseCount();</span><br><span class="line">        channel.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int useCount = fd.decrementAndGetUseCount();</span><br><span class="line"></span><br><span class="line">    if ((useCount &lt;= 0) || !isRunningFinalize()) &#123;</span><br><span class="line">        close0();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private native void close0() throws IOException;</span><br></pre></td></tr></table></figure>
<p>这两个类暂时 看到这里了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://longxianghome.com/2017/05/22/20170522-JDK 1.7 java.io 源码学习之 FileInputStream 和 FileOutputStream/" data-id="cjlc35euq00aj7d6btfojsymg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-IO-Framework/">Java IO Framework</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20170521-VPS 中安装 Shadowsocks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/21/20170521-VPS 中安装 Shadowsocks/" class="article-date">
  <time datetime="2017-05-21T05:57:24.000Z" itemprop="datePublished">2017-05-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/杂谈/">杂谈</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/21/20170521-VPS 中安装 Shadowsocks/">VPS 中安装 Shadowsocks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>VPS 购买后，会提供 VPS 的 IP 、端口、连接密码。通过 SSH 工具连接 VPS。</p>
<p>1）安装 wget </p>
<p><code>yum -y install wget</code></p>
<p>2) 下载 wget</p>
<p><code>wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</code></p>
<p>3) 修改脚本执行权限</p>
<p><code>chmod +x shadowsocks-all.sh</code></p>
<p>4）执行安装</p>
<p><code>./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log</code></p>
<p>出现四个选项：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1）Shadowsocks-Python</span><br><span class="line">2) ShadowsocksR</span><br><span class="line">3) Shadowsocks-GO</span><br><span class="line">4) Shadowsocks-libev</span><br></pre></td></tr></table></figure>
<p>默认即可，默认选择 Shadowsocks-Python</p>
<p>接着提示输入 Shadowsocks Server 密码：输入自定义密码</p>
<p>接着提示输入端口：使用默认端口即可 </p>
<p>接着提示选择加密方式：选择 aes-256-cfb </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://longxianghome.com/2017/05/21/20170521-VPS 中安装 Shadowsocks/" data-id="cjlc35euf009q7d6bueouwda3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shadowsocks/">Shadowsocks</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-20170420-Spring Framework Tutorial：Event Handling in Spring" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/20/20170420-Spring Framework Tutorial：Event Handling in Spring/" class="article-date">
  <time datetime="2017-04-20T05:57:24.000Z" itemprop="datePublished">2017-04-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring-Framework-Tutorial/">Spring Framework Tutorial</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/20/20170420-Spring Framework Tutorial：Event Handling in Spring/">Spring Framework Tutorial：Event Handling in Spring</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>You have seen in all the chapters that the core of Spring is the ApplicationContext, which manages the complete life cycle of the beans. The <strong>ApplicationContext</strong> publishes certain types of events when loading the beans. For example, a ContextStartedEvent is published when the context is started and ContextStoppedEvent is published when the context is stopped.</p>
<p>Event handling in the ApplicationContext is provided through the ApplicationEvent class and ApplicationListener interface. </p>
<p>ApplicationContext 的事件处理是依靠类 ApplicationEvent 和接口 ApplicationListener 提供的。</p>
<p>Hence, if a bean implements the ApplicationListener, then every time an ApplicationEvent gets published to the ApplicationContext, that bean is notified.</p>
<p>一旦 Bean 实现了 ApplicationListener 接口，当 ApplicationContext 接收到 ApplicationEvent 时，该 Bean 即可感知到该事件。</p>
<p>Spring provides the following standard events −</p>
<p>Spring 内置了如下事件：</p>
<ol>
<li>ContextRefreshedEvent</li>
</ol>
<p>This event is published when the ApplicationContext is either initialized or refreshed. </p>
<p>ApplicationContext 初始化或刷新完成后触发的事件，在容器初始化完成后调用。</p>
<p>ApplicationContext 初始化完毕是指所有的 Bean 被成功装载，后处理 Bean 被监测并激活，所有 Singleton Bean 被预实例化，ApplicationContext 容器已就绪可用</p>
<p>This can also be raised using the refresh() method on the ConfigurableApplicationContext interface.</p>
<ol start="2">
<li>ContextStartedEvent</li>
</ol>
<p>This event is published when the ApplicationContext is started using the start() method on the ConfigurableApplicationContext interface. </p>
<p>ApplicationContext 启动后触发的事件</p>
<p>You can poll your database or you can restart any stopped application after receiving this event.</p>
<ol start="3">
<li>ContextStoppedEvent</li>
</ol>
<p>This event is published when the ApplicationContext is stopped using the stop() method on the ConfigurableApplicationContext interface. </p>
<p>ApplicationContext 停止后触发的事件</p>
<p>You can do required housekeep work after receiving this event.</p>
<ol start="4">
<li>ContextClosedEvent</li>
</ol>
<p>This event is published when the ApplicationContext is closed using the close() method on the ConfigurableApplicationContext interface. </p>
<p>ApplicationContext 关闭后触发的事件</p>
<p>A closed context reaches its end of life; it cannot be refreshed or restarted.</p>
<ol start="5">
<li>RequestHandledEvent</li>
</ol>
<p>This is a web-specific event telling all beans that an HTTP request has been serviced.</p>
<p>Spring’s event handling is single-threaded so if an event is published, until and unless all the receivers get the message, the processes are blocked and the flow will not continue. Hence, care should be taken when designing your application if the event handling is to be used.</p>
<p>Listening to Context Events<br>To listen to a context event, a bean should implement the ApplicationListener interface which has just one method onApplicationEvent(). So let us write an example to see how the events propagates and how you can put your code to do required task based on certain events.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://longxianghome.com/2017/04/20/20170420-Spring Framework Tutorial：Event Handling in Spring/" data-id="cjlc35eud009n7d6bqhftynpp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Framework/">Spring Framework</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/15/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/">38</a><a class="extend next" rel="next" href="/page/17/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CI/">CI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Gitflow/">Gitflow</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDK/">JDK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDK-源码-1-7/">JDK 源码 1.7</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDK-源码-1-8-0-161/">JDK 源码 1.8.0_161</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JIRA/">JIRA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JPA/">JPA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Collections-Framework/">Java Collections Framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Concurrent/">Java Concurrent</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Servlet/">Java Servlet</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Thread/">Java Thread</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-算法/">Java 算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis-原理/">MyBatis 原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyCAT/">MyCAT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Boot/">Spring Boot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Boot-源码/">Spring Boot 源码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Framework/">Spring Framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Framework-Tutorial/">Spring Framework Tutorial</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Security/">Spring Security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web-安全/">Web 安全</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ZooKeeper/">ZooKeeper</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《Java-核心技术-36-讲》专栏笔记/">《Java 核心技术 36 讲》专栏笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《深入拆解-Java-虚拟机》专栏笔记/">《深入拆解 Java 虚拟机》专栏笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/《深入理解Java虚拟机》/">《深入理解Java虚拟机》</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作积累/">工作积累</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂谈/">杂谈</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/行业知识/">行业知识</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArrayList/">ArrayList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAS/">CAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/">CI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-持续集成/">CI 持续集成</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSRF/">CSRF</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Collection/">Collection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Comparable/">Comparable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Comparator/">Comparator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ExceptionHandler/">ExceptionHandler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GS1/">GS1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitflow/">Gitflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HashMap/">HashMap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Iterator/">Iterator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/">JDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK-8/">JDK 8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JIRA/">JIRA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JPA/">JPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-Collections-Framework/">Java Collections Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-IO-Framework/">Java IO Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-Thread/">Java Thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-虚拟机/">Java 虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java虚拟机/">Java虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LinkedList/">LinkedList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyCAT/">MyCAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReentrantLock/">ReentrantLock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RestTemplate/">RestTemplate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Servlet/">Servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shadowsocks/">Shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sonatype-Nexus/">Sonatype Nexus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Framework/">Spring Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Security/">Spring Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThreadLocal/">ThreadLocal</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XSS/">XSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZooKeeper/">ZooKeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/冒泡排序/">冒泡排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/包装类/">包装类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单例模式/">单例模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作积累/">工作积累</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工厂模式/">工厂模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/持续集成/">持续集成</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插入排序/">插入排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程/">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/适配器模式/">适配器模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择排序/">选择排序</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ArrayList/" style="font-size: 11px;">ArrayList</a> <a href="/tags/CAS/" style="font-size: 10px;">CAS</a> <a href="/tags/CI/" style="font-size: 12px;">CI</a> <a href="/tags/CI-持续集成/" style="font-size: 10px;">CI 持续集成</a> <a href="/tags/CSRF/" style="font-size: 10px;">CSRF</a> <a href="/tags/Collection/" style="font-size: 10px;">Collection</a> <a href="/tags/Comparable/" style="font-size: 10px;">Comparable</a> <a href="/tags/Comparator/" style="font-size: 10px;">Comparator</a> <a href="/tags/ExceptionHandler/" style="font-size: 10px;">ExceptionHandler</a> <a href="/tags/GS1/" style="font-size: 11px;">GS1</a> <a href="/tags/Gitflow/" style="font-size: 10px;">Gitflow</a> <a href="/tags/HashMap/" style="font-size: 10px;">HashMap</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Iterator/" style="font-size: 10px;">Iterator</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/JDK-8/" style="font-size: 13px;">JDK 8</a> <a href="/tags/JIRA/" style="font-size: 10px;">JIRA</a> <a href="/tags/JPA/" style="font-size: 17px;">JPA</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Java-Collections-Framework/" style="font-size: 10px;">Java Collections Framework</a> <a href="/tags/Java-IO-Framework/" style="font-size: 15px;">Java IO Framework</a> <a href="/tags/Java-Thread/" style="font-size: 18px;">Java Thread</a> <a href="/tags/Java-虚拟机/" style="font-size: 12px;">Java 虚拟机</a> <a href="/tags/Java虚拟机/" style="font-size: 11px;">Java虚拟机</a> <a href="/tags/Jenkins/" style="font-size: 10px;">Jenkins</a> <a href="/tags/LinkedList/" style="font-size: 10px;">LinkedList</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/MyBatis/" style="font-size: 20px;">MyBatis</a> <a href="/tags/MyCAT/" style="font-size: 10px;">MyCAT</a> <a href="/tags/MySQL/" style="font-size: 16px;">MySQL</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Redis/" style="font-size: 11px;">Redis</a> <a href="/tags/ReentrantLock/" style="font-size: 10px;">ReentrantLock</a> <a href="/tags/RestTemplate/" style="font-size: 10px;">RestTemplate</a> <a href="/tags/Servlet/" style="font-size: 12px;">Servlet</a> <a href="/tags/Shadowsocks/" style="font-size: 10px;">Shadowsocks</a> <a href="/tags/Sonatype-Nexus/" style="font-size: 10px;">Sonatype Nexus</a> <a href="/tags/Spring-Boot/" style="font-size: 19px;">Spring Boot</a> <a href="/tags/Spring-Cloud/" style="font-size: 16px;">Spring Cloud</a> <a href="/tags/Spring-Framework/" style="font-size: 17px;">Spring Framework</a> <a href="/tags/Spring-Security/" style="font-size: 14px;">Spring Security</a> <a href="/tags/ThreadLocal/" style="font-size: 10px;">ThreadLocal</a> <a href="/tags/XSS/" style="font-size: 10px;">XSS</a> <a href="/tags/ZooKeeper/" style="font-size: 10px;">ZooKeeper</a> <a href="/tags/冒泡排序/" style="font-size: 10px;">冒泡排序</a> <a href="/tags/包装类/" style="font-size: 10px;">包装类</a> <a href="/tags/单例模式/" style="font-size: 11px;">单例模式</a> <a href="/tags/工作积累/" style="font-size: 11px;">工作积累</a> <a href="/tags/工厂模式/" style="font-size: 10px;">工厂模式</a> <a href="/tags/持续集成/" style="font-size: 12px;">持续集成</a> <a href="/tags/插入排序/" style="font-size: 10px;">插入排序</a> <a href="/tags/编程/" style="font-size: 10px;">编程</a> <a href="/tags/适配器模式/" style="font-size: 10px;">适配器模式</a> <a href="/tags/选择排序/" style="font-size: 10px;">选择排序</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/08/20180808-Spring Security PasswordEncoder 相关源码阅读/">Spring Security PasswordEncoder 相关源码阅读</a>
          </li>
        
          <li>
            <a href="/2018/07/27/20180731-MySQL 事务隔离级别和悲观锁乐观锁原理/">MySQL 事务隔离级别和悲观锁乐观锁原理</a>
          </li>
        
          <li>
            <a href="/2018/07/27/20180727-JVM 如何执行方法调用的/">JVM 如何执行方法调用的</a>
          </li>
        
          <li>
            <a href="/2018/07/25/20180725-Java 虚拟机是如何加载 Java 类的/">Java 虚拟机是如何加载 Java 类的</a>
          </li>
        
          <li>
            <a href="/2018/07/20/20180720-Java 代码是怎么运行的/">Java 代码是怎么运行的</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 longxiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>